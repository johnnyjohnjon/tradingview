{"ast":null,"code":"import _regeneratorRuntime from\"/Users/JohnD/Documents/tradingview/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _createForOfIteratorHelper from\"/Users/JohnD/Documents/tradingview/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _asyncToGenerator from\"/Users/JohnD/Documents/tradingview/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/JohnD/Documents/tradingview/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/Users/JohnD/Documents/tradingview/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import React,{useState,useContext}from'react';import styled from\"styled-components\";import TradeList from'./TradeList';import{GlobalContext}from'../context/GlobalState';//import { pairs } from 'd3';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CSS=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  background: #3d3d4a;\\n  color: #898996;\\n  display:flex;\\n\\n  padding: 1%;\\n  margin: 0% 0% 1% 0%;\\n\\n  .settings{\\n    font-size: 16px;\\n    padding: 1%;\\n    width: 25%;\\n    box-shadow: rgba(0, 0, 0, 0.25) 0px 0.0625em 0.0625em, rgba(0, 0, 0, 0.25) 0px 0.125em 0.5em, rgba(255, 255, 255, 0.1) 0px 0px 0px 1px inset;\\n  }\\n  .results-overview{\\n    padding: 1%;\\n    width: 24%;\\n    font-size: 16px;\\n    box-shadow: rgba(0, 0, 0, 0.25) 0px 0.0625em 0.0625em, rgba(0, 0, 0, 0.25) 0px 0.125em 0.5em, rgba(255, 255, 255, 0.1) 0px 0px 0px 1px inset;\\n    margin: 0% 1%;\\n  }\\n  .list-of-trades{\\n    padding:1%;\\n    width: 50%;\\n    font-size: 16px;\\n    box-shadow: rgba(0, 0, 0, 0.25) 0px 0.0625em 0.0625em, rgba(0, 0, 0, 0.25) 0px 0.125em 0.5em, rgba(255, 255, 255, 0.1) 0px 0px 0px 1px inset;\\n\\n  }\\n\\n\\n  h4{\\n    font-size: 180%;\\n    border-bottom: 4px solid #898996;\\n  }\\n\\n\\n\\n  /* left card CSS begin */\\n  .input-flex{\\n    display:flex;\\n    border: none;\\n    border-bottom: 2px solid #6464a3;\\n    background: transparent;//#eff1f2;\\n    color: #dedfe4;\\n    width: 75%;\\n    height: 2rem;\\n    font-size: 16px;\\n    padding-left: 0.5rem;\\n    padding-top: 0.325rem;\\n    padding-bottom: 0.325rem;\\n    margin-bottom: 0.425rem;\\n    \\n    &:focus, &:hover{\\n      outline: none;\\n      color: #373641;\\n      ::placeholder{\\n        color: #a5a5b0;\\n      }\\n      background: #dedfe4;\\n    }\\n    ::placeholder{\\n      color: #dedfe4;\\n    }\\n  }\\n\\n  .input-inline{\\n    display:inline;\\n    border: none;\\n    border-bottom: 2px solid #6464a3;\\n    background: transparent;//#eff1f2;\\n    color: #dedfe4;\\n    width:10%;\\n    height: 2rem;\\n    font-size: 16px;\\n    padding-left: 0.5rem;\\n    padding-top: 0.325rem;\\n    padding-bottom: 0.325rem;\\n    margin-bottom: 0.425rem;\\n    \\n    &:focus, &:hover{\\n      outline: none;\\n      color: #373641;\\n      ::placeholder{\\n        color: #a5a5b0;\\n      }\\n      background: #dedfe4;\\n    }\\n    ::placeholder{\\n      color: #dedfe4;\\n    }\\n  }\\n\\n  .input-label{\\n    color: #898996;\\n    font-size: 14px;\\n  }\\n\\n  .input-label-sub{\\n    color: #898996;\\n    font-style: italic;\\n    font-size: 80%;\\n    padding-left: 5%;\\n    margin-bottom: 2%;\\n  }\\n\\n  .input-select {\\n    display:flex;\\n    width: 75%;\\n    color: #dedfe4;\\n    border: none;\\n    border-bottom: 2px solid #6464a3;\\n    background: transparent;\\n    height: 2rem;\\n    font-size: 16px;\\n    padding-left: 0.5rem;\\n    margin-bottom: 0.425rem;\\n\\n    &:focus, &:hover{\\n      outline: none;\\n      color: #373641;\\n      background: #dedfe4;\\n    }\\n  }\\n\\n\\n  .calc-button {\\n    display: block;\\n    cursor: pointer;\\n    outline: none;\\n    border: none;\\n    background-color: #dedfe4;\\n    width: 200px;\\n    height: 35px;\\n    border-radius: 30px;\\n    font-size: 18px;\\n    font-weight: 600;\\n    color: #373641;\\n    background-size: 100% 100%;\\n    box-shadow: 0 0 0 1px black inset;\\n    margin: 1%;\\n    margin-top: 3%;\\n\\n    @media only screen and (max-width: 968px) {\\n      width: auto;\\n    }\\n  }\\n  \\n  .calc-button:hover {\\n    background-image: linear-gradient(\\n      145deg,\\n      transparent 10%,\\n      #89d47f 10% 20%,\\n      transparent 20% 30%,\\n      #89d47f 30% 40%,\\n      transparent 40% 50%,\\n      #89d47f 50% 60%,\\n      transparent 60% 70%,\\n      #89d47f 70% 80%,\\n      transparent 80% 90%,\\n      #89d47f 90% 100%\\n    );\\n    animation: background 6s linear infinite;\\n\\n\\n    @media only screen and (max-width: 968px) {\\n      width: auto;\\n      color: #52515c;\\n      background-color: #ebebeb;\\n      background-image: none;\\n    }\\n  }\\n\\n  .del-button {\\n    display: block;\\n    cursor: pointer;\\n    outline: none;\\n    border: none;\\n    background-color: #dedfe4;\\n    width: 200px;\\n    height: 35px;\\n    border-radius: 30px;\\n    font-size: 18px;\\n    font-weight: 600;\\n    color: #373641;\\n    background-size: 100% 100%;\\n    box-shadow: 0 0 0 1px black inset;\\n    margin: 1%;\\n    \\n    margin-top: 3%;@media only screen and (max-width: 968px) {\\n      width: auto;\\n    }\\n  }\\n  \\n  .del-button:hover {\\n    background-image: linear-gradient(\\n      145deg,\\n      transparent 10%,\\n      #d4847f 10% 20%,\\n      transparent 20% 30%,\\n      #d4847f 30% 40%,\\n      transparent 40% 50%,\\n      #d4847f 50% 60%,\\n      transparent 60% 70%,\\n      #d4847f 70% 80%,\\n      transparent 80% 90%,\\n      #d4847f 90% 100%\\n    );\\n    animation: background 6s linear infinite;\\n    @media only screen and (max-width: 968px) {\\n      width: auto;\\n      color: #52515c;\\n      background-color: #ebebeb;\\n      background-image: none;\\n    }\\n  }\\n  \\n  @keyframes background {\\n    0% {\\n      background-position: 0 0;\\n    }\\n    100% {\\n      background-position: 400px 0;\\n    }\\n  }\\n  /* left card CSS end */\\n  /* middle card CSS begin */\\n  .result-item{\\n    border-bottom: 2px solid #6464a3;\\n    height: auto;\\n    margin-bottom: 4%;\\n    padding-bottom: 1%;\\n  }\\n  .result-title{\\n    text-align: left;\\n    color: #898996;\\n    font-size: 14px;\\n    width: 50%;\\n  }\\n  .result-output{\\n    text-align: right;\\n    color: #dedfe4;\\n    font-size: 16px;\\n    width: 50%;\\n  }\\n\\n  .conclusion-title{\\n    text-align: left;\\n    color: #898996;\\n    font-size: 14px;\\n    width: 35%;\\n  }\\n  .backtest-won{\\n    text-align: right;\\n    font-size: 16px;\\n    width: 65%;\\n\\n    color: #81dfc4;\\n  }\\n\\n  .backtest-lost{\\n    text-align: right;\\n    font-size: 16px;\\n    width: 65%;\\n\\n    color: #d75b6d;\\n  }\\n\\n  .backtest-null{\\n    text-align: right;\\n    font-size: 16px;\\n    width: 65%;\\n\\n    color: #dedfe4;\\n  }\\n  /* middle card CSS end */\\n  /* right card CSS begin */\\n  .trades-scroll{\\n    font-size: 12px;\\n    background-color: #373641;\\n    padding: 1% 3%;\\n    width:auto;\\n    overflow-y:auto;\\n    overflow-x:clip;\\n    height: 750px;\\n  }\\n\\n  /* right card CSS end */\\n\\n  /* Tooltip begin */\\n  [data-tooltip] {\\n    position: relative;\\n    z-index: 10;\\n  }\\n\\n  /* Positioning and visibility settings of the tooltip */\\n  [data-tooltip]:before,\\n  [data-tooltip]:after {\\n    position: absolute;\\n    visibility: hidden;\\n    opacity: 0;\\n    left: 50%;\\n    bottom: calc(100% + 5px); /* 5px is the size of the arrow */\\n    pointer-events: none;\\n    transition: 0.2s;\\n    will-change: transform;\\n  }\\n\\n  /* The actual tooltip with a dynamic width */\\n  [data-tooltip]:before {\\n    content: attr(data-tooltip);\\n    padding: 10px 18px;\\n    min-width: 50px;\\n    max-width: 300px;\\n    width: max-content;\\n    width: -moz-max-content;\\n    border-radius: 6px;\\n    font-size: 14px;\\n    background-color: rgba(59, 72, 80, 0.9);\\n    background-image: linear-gradient(30deg,\\n      rgba(59, 72, 80, 0.44),\\n      rgba(59, 68, 75, 0.44),\\n      rgba(60, 82, 88, 0.44));\\n    box-shadow: 0px 0px 24px rgba(0, 0, 0, 0.2);\\n    color: #fff;\\n    text-align: center;\\n    white-space: pre-wrap;\\n    transform: translate(-50%, -5px) scale(0.5);\\n  }\\n\\n  /* Tooltip arrow */\\n  [data-tooltip]:after {\\n    content: '';\\n    border-style: solid;\\n    border-width: 5px 5px 0px 5px; /* CSS triangle */\\n    border-color: rgba(55, 64, 70, 0.9) transparent transparent transparent;\\n    transition-duration: 0s; /* If the mouse leaves the element, \\n                                the transition effects for the \\n                                tooltip arrow are \\\"turned off\\\" */\\n    transform-origin: top;   /* Orientation setting for the\\n                                slide-down effect */\\n    transform: translateX(-50%) scaleY(0);\\n  }\\n\\n  /* Tooltip becomes visible at hover */\\n  [data-tooltip]:hover:before,\\n  [data-tooltip]:hover:after {\\n    visibility: visible;\\n    opacity: 1;\\n  }\\n  /* Scales from 0.5 to 1 -> grow effect */\\n  [data-tooltip]:hover:before {\\n    transition-delay: 0.3s;\\n    transform: translate(-50%, -5px) scale(1);\\n  }\\n  /* \\n    Arrow slide down effect only on mouseenter (NOT on mouseleave)\\n  */\\n  [data-tooltip]:hover:after {\\n    transition-delay: 0.5s; /* Starting after the grow effect */\\n    transition-duration: 0.2s;\\n    transform: translateX(-50%) scaleY(1);\\n  }\\n\\n  /* LEFT */\\n  /* Tooltip + arrow */\\n  [data-tooltip-location=\\\"left\\\"]:before,\\n  [data-tooltip-location=\\\"left\\\"]:after {\\n    left: auto;\\n    right: calc(100% + 5px);\\n    bottom: 50%;\\n  }\\n\\n  /* Tooltip */\\n  [data-tooltip-location=\\\"left\\\"]:before {\\n    transform: translate(-5px, 50%) scale(0.5);\\n  }\\n  [data-tooltip-location=\\\"left\\\"]:hover:before {\\n    transform: translate(-5px, 50%) scale(1);\\n  }\\n\\n  /* Arrow */\\n  [data-tooltip-location=\\\"left\\\"]:after {\\n    border-width: 5px 0px 5px 5px;\\n    border-color: transparent transparent transparent rgba(55, 64, 70, 0.9);\\n    transform-origin: left;\\n    transform: translateY(50%) scaleX(0);\\n  }\\n  [data-tooltip-location=\\\"left\\\"]:hover:after {\\n    transform: translateY(50%) scaleX(1);\\n  }\\n\\n\\n\\n  /* RIGHT */\\n  [data-tooltip-location=\\\"right\\\"]:before,\\n  [data-tooltip-location=\\\"right\\\"]:after {\\n    left: calc(100% + 5px);\\n    bottom: 50%;\\n  }\\n\\n  [data-tooltip-location=\\\"right\\\"]:before {\\n    transform: translate(5px, 50%) scale(0.5);\\n  }\\n  [data-tooltip-location=\\\"right\\\"]:hover:before {\\n    transform: translate(5px, 50%) scale(1);\\n  }\\n\\n  [data-tooltip-location=\\\"right\\\"]:after {\\n    border-width: 5px 5px 5px 0px;\\n    border-color: transparent rgba(55, 64, 70, 0.9) transparent transparent;\\n    transform-origin: right;\\n    transform: translateY(50%) scaleX(0);\\n  }\\n  [data-tooltip-location=\\\"right\\\"]:hover:after {\\n    transform: translateY(50%) scaleX(1);\\n  }\\n\\n\\n\\n  /* BOTTOM */\\n  [data-tooltip-location=\\\"bottom\\\"]:before,\\n  [data-tooltip-location=\\\"bottom\\\"]:after {\\n    top: calc(100% + 5px);\\n    bottom: auto;\\n  }\\n\\n  [data-tooltip-location=\\\"bottom\\\"]:before {\\n    transform: translate(-50%, 5px) scale(0.5);\\n  }\\n  [data-tooltip-location=\\\"bottom\\\"]:hover:before {\\n    transform: translate(-50%, 5px) scale(1);\\n  }\\n\\n  [data-tooltip-location=\\\"bottom\\\"]:after {\\n    border-width: 0px 5px 5px 5px;\\n    border-color: transparent transparent rgba(55, 64, 70, 0.9) transparent;\\n    transform-origin: bottom;\\n  }\\n\\n  /* End of tooltips */\\n\\n\"])));export var Backtest=function Backtest(_ref){var backtest=_ref.backtest;var defaultTimePeriod=function defaultTimePeriod(){switch(backtest.indicator){case'RSI':return 14;case'EMA':return 9;case'SMA':return 9;case'BB':return 20;default:return 24;}};var defaultBuyStrat=function defaultBuyStrat(){switch(backtest.indicator){case'RSI':return 30;case'EMA':return-3;case'SMA':return-3;case'BB':return-3;default:return-3;}};// Returns today date in YYYY-MM-DD formate\nvar getTodayDate=function getTodayDate(){return new Date().toISOString().slice(0,10);};// Returns 100 years ago today date in YYYY-MM-DD formate\nvar getOldDate=function getOldDate(){var myDate=new Date(new Date().setFullYear(new Date().getFullYear()-100));return myDate.toISOString().slice(0,10);};// Converts YYYY-MM-DD to DD/MM/YYYY\nvar formatDate=function formatDate(uglyDate){var array=(uglyDate||'').toString().split(/-/g);array.push(array.shift());return array.join('/')||null;};var _useState=useState([]),_useState2=_slicedToArray(_useState,2),tradeListData=_useState2[0],setTradeListData=_useState2[1];var _useState3=useState('1. open'),_useState4=_slicedToArray(_useState3,2),seriesType=_useState4[0],setSeriesType=_useState4[1];var _useState5=useState(defaultTimePeriod()),_useState6=_slicedToArray(_useState5,2),timePeriod=_useState6[0],setTimePeriod=_useState6[1];var _useState7=useState(2),_useState8=_slicedToArray(_useState7,2),stdDeviation=_useState8[0],setStdDeviation=_useState8[1];var _useState9=useState(getOldDate()),_useState10=_slicedToArray(_useState9,2),startDate=_useState10[0],setStartDate=_useState10[1];var _useState11=useState(getTodayDate()),_useState12=_slicedToArray(_useState11,2),endDate=_useState12[0],setEndDate=_useState12[1];var _useState13=useState(15),_useState14=_slicedToArray(_useState13,2),maxBags=_useState14[0],setMaxBags=_useState14[1];var _useState15=useState(3000),_useState16=_slicedToArray(_useState15,2),initalBalance=_useState16[0],setInitialBalance=_useState16[1];var _useState17=useState('usd'),_useState18=_slicedToArray(_useState17,2),initalBuyType=_useState18[0],setInitalBuyType=_useState18[1];var _useState19=useState(100),_useState20=_slicedToArray(_useState19,2),initalBuyAmount=_useState20[0],setInitalBuyAmount=_useState20[1];var _useState21=useState(defaultBuyStrat()),_useState22=_slicedToArray(_useState21,2),buyStrategyValue=_useState22[0],setBuyStrategyValue=_useState22[1];var _useState23=useState('Real Middle Band'),_useState24=_slicedToArray(_useState23,2),buyStrategyType=_useState24[0],setBuyStrategyType=_useState24[1];// Used for Bollinger upper/middle/lower\nvar _useState25=useState(1),_useState26=_slicedToArray(_useState25,2),sellStrategyValue=_useState26[0],setSellStrategyValue=_useState26[1];var _useContext=useContext(GlobalContext),deleteBacktest=_useContext.deleteBacktest,current_symbol=_useContext.current_symbol,cache_TSDA=_useContext.cache_TSDA,cache_TSDA_function=_useContext.cache_TSDA_function;// Used for JSX dropdown items\nvar dropdownItems=function dropdownItems(items){return items.map(function(item){return/*#__PURE__*/_jsx(\"option\",{value:item.value,children:item.name},item.name);});};// Calculates USD value for creating a bag\nfunction calcInitalBuy(buyType,buyAmount,currentBalance,curStockPrice){switch(buyType){case\"numStocks\":return curStockPrice*buyAmount;case\"percent\":return currentBalance*(buyAmount/100.00);default:// case \"usd\":\nreturn buyAmount;}}// Function to return true/false for buy condition, given price and indicator values\nfunction isBuyConditionMet(buyStrategyValue,curStockPrice,curIndicatorValue){switch(backtest.indicator){case\"RSI\":return curIndicatorValue<buyStrategyValue;default:// case EMA, SMA, BB (all cases where indicator is a price of stock)\nconsole.log(\"price is \".concat(curStockPrice,\", indicator is \").concat(curIndicatorValue,\", buy Price\"),curIndicatorValue*((100.0+buyStrategyValue)/100.0),curStockPrice<=curIndicatorValue*((100.0+buyStrategyValue)/100.0));return curStockPrice<=curIndicatorValue*((100.0+buyStrategyValue)/100.0);}}// Returns JSON name of element for indicator item\nfunction getIndicatorJSON(){switch(backtest.indicator){case\"BBANDS\":return buyStrategyType;default:return backtest.indicator;}}// Finalizes trade, storing buy/sell data into backtest.tradeListData\nfunction finalizeTrade(myBag,buyDate,sellDate,candleCountSell,sellPrice,curIndicatorValue,numShares){var percentChange=sellPrice/myBag[\"buy-price\"];var profitUSD=+(percentChange-1)*myBag[\"volume-USD\"];var candleLength=+candleCountSell-myBag[\"candle-count-buy\"];// Push on individual trade data\nbacktest.tradeListData.push({buyDate:buyDate,sellDate:sellDate,buyPrice:myBag[\"buy-price\"],sellPrice:sellPrice,numShares:numShares,profitPercent:+percentChange-1,profitUSD:profitUSD,candleLength:candleLength,indicatorAtSell:curIndicatorValue,indicatorAtBuy:myBag[\"indicator-at-buy\"]});// Update results Overview data\nbacktest.numTrades++;backtest.profitUSD+=profitUSD;backtest.netBars+=candleLength;backtest.netSellVolume+=sellPrice*numShares;//console.log(\"finalizeTrade called, % change:\", percentChange, buyDate, sellDate);\n}// Runs user specified backtest algorithms and prepares outputs/trades to display\nfunction runBacktests(_x,_x2){return _runBacktests.apply(this,arguments);}// Turns JSX input type to date\nfunction _runBacktests(){_runBacktests=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(paperAPICall,pairSettings){var stockPriceData,stockIndicatorData,response,optionalParameters,candleCount,bagList,currentBalance,startDateReached,lowestSellPrice,_iterator,_step,_step$value,key,curIndicatorValue,curStockPrice,newBagVolume,sellDate,_i,_Object$entries,_Object$entries$_i,_key,newBagListKeys,_iterator2,_step2,_step2$value,_key2;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(current_symbol){_context.next=3;break;}alert(\"Please select a stock to test your strategy on.\");return _context.abrupt(\"return\");case 3:if(cache_TSDA['Meta Data']){_context.next=15;break;}_context.next=6;return fetch(\"https://www.alphavantage.co/query?function=TIME_SERIES_DAILY_ADJUSTED&symbol=\".concat(current_symbol,\"&outputsize=full&apikey=CQ5JZQYM4DG0OODA\"));case 6:response=_context.sent;_context.next=9;return response.json();case 9:stockPriceData=_context.sent;cache_TSDA_function(stockPriceData);// Stop if MAX API\nif(!stockPriceData.Note){_context.next=13;break;}return _context.abrupt(\"return\");case 13:_context.next=16;break;case 15:stockPriceData=cache_TSDA;case 16:_context.t0=backtest.indicator;_context.next=_context.t0==='BBANDS'?19:21;break;case 19:optionalParameters=\"&nbdevup=\".concat(pairSettings.stdDeviation,\"&nbdevdn=\").concat(pairSettings.stdDeviation);return _context.abrupt(\"break\",22);case 21:optionalParameters='';case 22:_context.next=24;return fetch(\"https://www.alphavantage.co/query?function=\".concat(backtest.indicator,\"&symbol=\").concat(current_symbol,\"&interval=daily&time_period=\").concat(paperAPICall.timePeriod,\"&series_type=\").concat(paperAPICall.seriesType).concat(optionalParameters,\"&apikey=CQ5JZQYM4DG0OODA\"));case 24:response=_context.sent;_context.next=27;return response.json();case 27:stockIndicatorData=_context.sent;backtest.didRun=true;// Catches MAX API\nif(!stockIndicatorData.Note){_context.next=33;break;}alert(\"MAX API CALLS. Please wait a minute for more. Thank you for visitng my project! However, it was built using Alpha Vantage's standard API where the call frequency is 5 calls per minute and 500 calls per day.\");backtest.didRun=false;return _context.abrupt(\"return\");case 33:// Initalize bags/candle-count/currentBalance\ncandleCount=0;bagList={};bagList.length=0;currentBalance=pairSettings.initalBalance;startDateReached=false;// Initalize single integer to know lowest price I consider selling at(updated when new bags are added)\nlowestSellPrice=0;// Main loop that runs the paper trading bot algo, maintains bags/buys/sells/etc throughout 5 years (1265 trading days)\n// Note: in the following for loop: key == date\n_iterator=_createForOfIteratorHelper(Object.entries(stockIndicatorData[\"Technical Analysis: \".concat(backtest.indicator)]).reverse());_context.prev=40;_iterator.s();case 42:if((_step=_iterator.n()).done){_context.next=62;break;}_step$value=_slicedToArray(_step.value,1),key=_step$value[0];// Enables iterator code to run once start date reached/passed\nif(key>=startDate){startDateReached=true;}// Skips iterator because start date not reached\nif(!(startDateReached===false)){_context.next=49;break;}return _context.abrupt(\"continue\",60);case 49:if(!(key===endDate)){_context.next=51;break;}return _context.abrupt(\"break\",62);case 51:// Count Candles interated over\ncandleCount++;// Skip days where no price exists\nif(stockPriceData[\"Time Series (Daily)\"][\"\".concat(key)]){_context.next=54;break;}return _context.abrupt(\"continue\",60);case 54:// Essential values for iterating stock data\ncurIndicatorValue=+stockIndicatorData[\"Technical Analysis: \".concat(backtest.indicator)][\"\".concat(key)][\"\".concat(getIndicatorJSON())];curStockPrice=+stockPriceData[\"Time Series (Daily)\"][\"\".concat(key)][\"\".concat(paperAPICall.seriesType)];// First price of start date\nif(!backtest.startPrice){backtest.startPrice=curStockPrice;}// Maintain oldest price\nbacktest.endPrice=curStockPrice;// Prospective USD to create a new bag\nnewBagVolume=calcInitalBuy(pairSettings.initalBuyType,pairSettings.initalBuyAmount,currentBalance,curStockPrice);// If Buy condition: Bags open, balance sufficient, price meets indicator limit\nif(bagList.length<pairSettings.maxBags&&newBagVolume<=currentBalance&&isBuyConditionMet(pairSettings.buyStrategyValue,curStockPrice,curIndicatorValue)){// Create and add bag to bagList, increment bagList.length. Automatically added by creating key.\nbagList.length++;console.log(\"bag added\",bagList);bagList[\"\".concat(key)]={\"sell-price-limit\":+(1+pairSettings.sellStrategyValue/100)*curStockPrice,\"buy-price\":+curStockPrice,\"candle-count-buy\":+candleCount,\"volume-USD\":+newBagVolume,\"num-shares\":+newBagVolume/curStockPrice,\"indicator-at-buy\":curIndicatorValue};// Update currentBalance\ncurrentBalance-=bagList[\"\".concat(key)][\"volume-USD\"];// Update lowestSellPrice, min of current lowest, or new buy price is lower. Initialize if only 1 bag.\nif(bagList.length===1){lowestSellPrice=+bagList[\"\".concat(key)][\"sell-price-limit\"];}else{lowestSellPrice=Math.min(lowestSellPrice,bagList[\"\".concat(key)][\"sell-price-limit\"]);}// Else If Sell Condition\n}else if(curStockPrice>=lowestSellPrice&&bagList.length>0){// Store key of buy date(below loop has new key in smaller scope)\nsellDate=key;for(_i=0,_Object$entries=Object.entries(bagList);_i<_Object$entries.length;_i++){_Object$entries$_i=_slicedToArray(_Object$entries[_i],1),_key=_Object$entries$_i[0];if(curStockPrice>=bagList[\"\".concat(_key)][\"sell-price-limit\"]){// Finalize Trade function records trade data into backtest to display in JSX below\nfinalizeTrade(bagList[\"\".concat(_key)],_key,sellDate,candleCount,curStockPrice,curIndicatorValue,bagList[\"\".concat(_key)][\"num-shares\"],bagList[\"\".concat(_key)][\"indicator-at-buy\"]);delete bagList[\"\".concat(_key)];bagList.length--;}}// If bags exist, update to new lowest price\nnewBagListKeys=Object.entries(bagList);if(newBagListKeys[0][1]>0){lowestSellPrice=bagList[newBagListKeys[1][0]][\"sell-price-limit\"];_iterator2=_createForOfIteratorHelper(newBagListKeys);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){_step2$value=_slicedToArray(_step2.value,1),_key2=_step2$value[0];lowestSellPrice=Math.min(lowestSellPrice,+bagList[\"\".concat(_key2)][\"sell-price-limit\"]);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}}// End of Buy/Sell conditions\ncase 60:_context.next=42;break;case 62:_context.next=67;break;case 64:_context.prev=64;_context.t1=_context[\"catch\"](40);_iterator.e(_context.t1);case 67:_context.prev=67;_iterator.f();return _context.finish(67);case 70://console.log(\"iterating done\", backtest, startDate, endDate, backtest.holdReturn);\n// Iterating complete, finalize some data on compelted backtest algorithm\nbacktest.holdReturn=((backtest.endPrice/backtest.startPrice-1)*100).toFixed(2);//console.log(\"set holdret\", backtest.holdReturn, \"end/start\", backtest.endPrice, backtest.startPrice);\ndelete backtest.startPrice;backtest.profitPercentOnBalance=backtest.profitUSD/pairSettings.initalBalance;backtest.profitPercentOnTrades=backtest.profitUSD/(backtest.netSellVolume-backtest.profitUSD);backtest.avgBars=backtest.netBars/backtest.numTrades;// Update results display and sends tradeListData to TradeList.js in JSX below\nsetTradeListData(backtest.tradeListData);case 76:case\"end\":return _context.stop();}}},_callee,null,[[40,64,67,70]]);}));return _runBacktests.apply(this,arguments);}var _onFocus=function onFocus(e){e.currentTarget.type=\"date\";};var onSubmit=function onSubmit(){backtest.current_symbol=current_symbol;var paperAPICall={// Relavent variables that are global: current_symbol, interval(daily), backtest.indicator(ex, RSI)\nseriesType:seriesType,timePeriod:+timePeriod,stdDeviation:+stdDeviation};// Trivial value, set to 2\nif(paperAPICall.timePeriod===1){paperAPICall.timePeriod=2;}var pairSettings={maxBags:+maxBags,initalBalance:+initalBalance,initalBuyType:initalBuyType,initalBuyAmount:+initalBuyAmount,buyStrategyValue:+buyStrategyValue,buyStrategyType:buyStrategyType,// used for Bollinger upper/middle/lower\nsellStrategyValue:+sellStrategyValue};// Ensure no trivial strategies are submitted\nif(pairSettings.maxBags<1||pairSettings.initalBalance<1||pairSettings.initalBuyAmount<1||pairSettings.sellStrategyValue<0||paperAPICall.timePeriod<1){// Bags, balance, timeperiod, buy amount, sell gain% must be positive\nalert(\"Please enter valid inputs. Use positive integers for the following: Max bags, Sell percentage, Time period, Buy amount, Inital Balance.\");}else if(pairSettings.initalBuyType==='percent'&&(pairSettings.initalBuyAmount<1||pairSettings.initalBuyAmount>100)){// if(buy type is percent) buy amount must be (0-100]\nalert(\"Buy amount percentage must be 1-100%\");}else if(pairSettings.initalBuyAmount>pairSettings.initalBalance){// inital buy must be < inital balance\nalert(\"Inital buys must be less than or equal to inital balance.\");}else if(backtest.indicator==='RSI'&&(pairSettings.buyStrategyValue<1||pairSettings.buyStrategyValue>99)){// Ensure no trivial strategy specific settings are submitted <connect to previous if chain thing>\nalert(\"RSI values must be between 1-99\");}else if(backtest.indicator==='BBANDS'&&paperAPICall.stdDeviation<0.5){// Ensure no trivial BB std deviation\nalert(\"Standard Deviation must be greater than or equal to 0.5.\");}else{// Calculation inputs valid\n//console.log(pairSettings);\n// Initialize Trade List Data(for final results)\nbacktest.tradeListData=[];backtest.profitUSD=0;backtest.numTrades=0;backtest.netBars=0;backtest.netSellVolume=0;// Net volume USD sold\n// Run backtest algorithm\nrunBacktests(paperAPICall,pairSettings);}};var indicatorSettingDOM=null;switch(backtest.indicator){case'RSI':indicatorSettingDOM=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",\"data-tooltip\":\"Number of prior days technical indicator is calculated from.\",children:\"Time Period (days):\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input-flex\",placeholder:\"14\",onChange:function onChange(e){return setTimePeriod(e.target.value);}})]});break;case'EMA':indicatorSettingDOM=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",\"data-tooltip\":\"Number of prior days technical indicator is calculated from.\",children:\"Time Period (days): \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input-flex\",placeholder:\"9\",onChange:function onChange(e){return setTimePeriod(e.target.value);}})]});break;case'SMA':indicatorSettingDOM=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",\"data-tooltip\":\"Number of prior days technical indicator is calculated from.\",children:\"Time Period (days):\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input-flex\",placeholder:\"9\",onChange:function onChange(e){return setTimePeriod(e.target.value);}})]});break;case'BBANDS':indicatorSettingDOM=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",\"data-tooltip\":\"Number of prior days technical indicator is calculated from.\",children:\"Time Period (days): \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input-flex\",placeholder:\"20\",onChange:function onChange(e){return setTimePeriod(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",\"data-tooltip\":\"Standard devation for calculating upper and lower bollinger bands.\",children:\"Standard Deviation for upper/lower lines:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input-flex\",placeholder:\"2\",onChange:function onChange(e){return setStdDeviation(e.target.value);}})]});break;default:indicatorSettingDOM=/*#__PURE__*/_jsx(\"div\",{children:\"Default backtest indicator DOM\"});}var buyStrategyDOM=null;switch(backtest.indicator){case'RSI':buyStrategyDOM=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",\"data-tooltip\":\"Open a position on stock for this condition.\",children:\"Buy when RSI less than\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input-inline\",placeholder:\"30\",onChange:function onChange(e){return setBuyStrategyValue(e.target.value);}}),/*#__PURE__*/_jsx(\"br\",{})]});break;case'EMA':buyStrategyDOM=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",\"data-tooltip\":\"Open a position on stock for this condition.\",children:\"Buy at price\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input-inline\",placeholder:\"-3\",onChange:function onChange(e){return setBuyStrategyValue(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",\"data-tooltip\":\"Open a position on stock for this condition.\",children:\"% away from the EMA line. \"}),/*#__PURE__*/_jsx(\"label\",{className:\"input-label-sub\",\"data-tooltip\":\"Positive values will open a position when the stock price is X% above the indicator value. Negative values will open a position when the stock price is X% below the indicator value.\",children:\"(3 = 3% above, -3 = 3% below)\"}),/*#__PURE__*/_jsx(\"br\",{})]});break;case'SMA':buyStrategyDOM=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",\"data-tooltip\":\"Open a position on stock for this condition.\",children:\"Buy at price\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input-inline\",placeholder:\"-3\",onChange:function onChange(e){return setBuyStrategyValue(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",\"data-tooltip\":\"Open a position on stock for this condition.\",children:\"% away from the SMA line. \"}),/*#__PURE__*/_jsx(\"label\",{className:\"input-label-sub\",\"data-tooltip\":\"Positive values will open a position when the stock price is X% above the indicator value. Negative values will open a position when the stock price is X% below the indicator value.\",children:\"(3 = 3% above, -3 = 3% below)\"}),/*#__PURE__*/_jsx(\"br\",{})]});break;case'BBANDS':buyStrategyDOM=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",\"data-tooltip\":\"Select bollinger band the backtest will track to open and close positions.\",children:\"Band to follow:\"}),/*#__PURE__*/_jsx(\"select\",{className:\"input-select\",onChange:function onChange(e){return setBuyStrategyType(e.target.value);},children:dropdownItems([{name:'Middle',value:'Real Middle Band'},{name:'Upper',value:'Real Upper Band'},{name:'Lower',value:'Real Lower Band'}])}),/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",\"data-tooltip\":\"Open a position on stock for this condition.\",children:\"Buy at price\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input-inline\",placeholder:\"-3\",onChange:function onChange(e){return setBuyStrategyValue(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",\"data-tooltip\":\"Open a position on stock for this condition.\",children:\"% away from the selected line. \"}),/*#__PURE__*/_jsx(\"label\",{className:\"input-label-sub\",\"data-tooltip\":\"Positive values will open a position when the stock price is X% above the indicator value. Negative values will open a position when the stock price is X% below the indicator value.\",children:\"(3 = 3% above, -3 = 3% below)\"}),/*#__PURE__*/_jsx(\"br\",{})]});break;default:buyStrategyDOM=/*#__PURE__*/_jsx(\"div\",{children:\"buy strat dom default\"});}// Immediately Calculates backtest results (for 'See Example' button on homepage)\nif(backtest.immediatelyCalculate){onSubmit();backtest.immediatelyCalculate=false;}return/*#__PURE__*/_jsxs(CSS,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"settings\",children:[/*#__PURE__*/_jsxs(\"h4\",{\"data-tooltip\":\"Settings for calculating technical indicator.\",children:[backtest.indicator,\" Settings\"]}),/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",\"data-tooltip\":\"Indicator calculated from open, high, low, or closing prices for each period.\",children:\"Select Series Type:\"}),/*#__PURE__*/_jsx(\"select\",{className:\"input-select\",onChange:function onChange(e){return setSeriesType(e.target.value);},children:dropdownItems([{name:'open',value:'1. open'},{name:'close',value:'4. close'},{name:'high',value:'2. high'},{name:'low',value:'3. low'}])}),indicatorSettingDOM,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h4\",{\"data-tooltip\":\"Settings for calculating buy/sell conditions.\",children:\"Trading Strategy Settings\"}),/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",\"data-tooltip\":\"Date for the backtest to begin. Leave blank for earliest date.\",children:\"Start Date:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input-flex\",type:\"text\",placeholder:\"IPO date (earliest)\",onFocus:function onFocus(e){return _onFocus(e);},onChange:function onChange(e){return setStartDate(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",\"data-tooltip\":\"Date for the backtest to end. Leave blank for today's date.\",children:\"End Date:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input-flex\",type:\"text\",placeholder:formatDate(getTodayDate()),onFocus:function onFocus(e){return _onFocus(e);},onChange:function onChange(e){return setEndDate(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",\"data-tooltip\":\"Max number of positions to have at a given time. Algorithm will not add new positions that would exceed this value.\",children:\"Max number of positions:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input-flex\",placeholder:\"15\",onChange:function onChange(e){return setMaxBags(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",\"data-tooltip\":\"Inital balance for backtest algorithm to start trading with.\",children:\"Inital balance (USD):\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input-flex\",min:\"0\",placeholder:\"3000\",onChange:function onChange(e){return setInitialBalance(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",\"data-tooltip\":\"Volume of new positions will be opened in reference to this type of value.\",children:\"Inital buy type:\"}),/*#__PURE__*/_jsx(\"select\",{className:\"input-select\",onChange:function onChange(e){return setInitalBuyType(e.target.value);},children:dropdownItems([{name:'($) USD',value:'usd'},{name:'(%) Percent of Balance',value:'percent'},{name:'(#) Number of Stocks',value:'numStocks'}])}),/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",\"data-tooltip\":\"Value for new positions to begin with.\",children:\"Inital buy amount:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input-flex\",min:\"0\",placeholder:\"100\",onChange:function onChange(e){return setInitalBuyAmount(e.target.value);}}),buyStrategyDOM,/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",\"data-tooltip\":\"Close positions when profit meets or exceeds this value.\",children:\"Sell position at\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input-inline\",placeholder:\"1\",onChange:function onChange(e){return setSellStrategyValue(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{className:\"input-label\",\"data-tooltip\":\"Close positions when profit meets or exceeds this value.\",children:\"% profit.\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"calc-button\",onClick:function onClick(){return onSubmit();},children:\"Calculate\"}),/*#__PURE__*/_jsx(\"button\",{className:\"del-button\",onClick:function onClick(){return deleteBacktest(backtest.id);},children:\"Delete\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"results-overview\",children:[/*#__PURE__*/_jsxs(\"h4\",{\"data-tooltip\":\"Results of backtest.\",children:[\"Performance Overview \",backtest.current_symbol?\"(\"+backtest.current_symbol+\")\":\"\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"result-item\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"result-title\",\"data-tooltip\":\"Total profit of backtest in USD.\",children:\"Profit USD:\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"result-output\",children:[\"$\",(backtest.profitUSD?backtest.profitUSD:0).toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"result-item\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"result-title\",\"data-tooltip\":\"Total profit of backtest in percent.\",children:\"Profit Percent on Entire Balance: \"}),/*#__PURE__*/_jsxs(\"label\",{className:\"result-output\",children:[(backtest.profitPercentOnBalance?100*backtest.profitPercentOnBalance:0).toFixed(2),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"result-item\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"result-title\",\"data-tooltip\":\"Average profit of trades from running backtest.\",children:\"Average profit per trade: \"}),/*#__PURE__*/_jsxs(\"label\",{className:\"result-output\",children:[\" \",(backtest.profitPercentOnTrades?100*backtest.profitPercentOnTrades:0).toFixed(2),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"result-item\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"result-title\",\"data-tooltip\":\"Number of trades made by backtest.\",children:\"Number of trades: \"}),/*#__PURE__*/_jsx(\"label\",{className:\"result-output\",children:backtest.numTrades?backtest.numTrades:0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"result-item\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"result-title\",\"data-tooltip\":\"Average number of candles/days between opening and closing each position.\",children:\"Average bars per trade: \"}),/*#__PURE__*/_jsx(\"label\",{className:\"result-output\",children:(backtest.avgBars?backtest.avgBars:0).toFixed(2)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"result-item\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"result-title\",\"data-tooltip\":\"Return if inital balance had been fully invested at the start date and cashed out at the end date. (instead of running algorithm)\",children:\"Buy and hold return: \"}),/*#__PURE__*/_jsxs(\"label\",{className:\"result-output\",children:[backtest.holdReturn>0?\"+\":\"\",backtest.holdReturn?backtest.holdReturn:\"0\",\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"result-item\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"conclusion-title\",children:\"Backtest Conclusion: \"}),backtest.didRun?backtest.profitPercentOnBalance>backtest.holdReturn?/*#__PURE__*/_jsxs(\"label\",{className:\"backtest-won\",children:[\" This algorithm is more profitable than buy and holding \",backtest.current_symbol,\". \"]}):/*#__PURE__*/_jsxs(\"label\",{className:\"backtest-lost\",children:[\" Buy and holding \",backtest.current_symbol,\" is more profitable than this algorithm. \"]}):/*#__PURE__*/_jsx(\"label\",{className:\"backtest-null\",children:\"No trades made\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"list-of-trades\",children:[/*#__PURE__*/_jsx(\"h4\",{\"data-tooltip\":\"History of positions opened/closed by backtest.\",children:\"List Of Trades\"}),/*#__PURE__*/_jsx(\"div\",{className:\"trades-scroll\",children:/*#__PURE__*/_jsx(TradeList,{tradeList:tradeListData.map(function(tradeData){return tradeData;})})})]})]});};","map":{"version":3,"names":["React","useState","useContext","styled","TradeList","GlobalContext","CSS","div","Backtest","backtest","defaultTimePeriod","indicator","defaultBuyStrat","getTodayDate","Date","toISOString","slice","getOldDate","myDate","setFullYear","getFullYear","formatDate","uglyDate","array","toString","split","push","shift","join","tradeListData","setTradeListData","seriesType","setSeriesType","timePeriod","setTimePeriod","stdDeviation","setStdDeviation","startDate","setStartDate","endDate","setEndDate","maxBags","setMaxBags","initalBalance","setInitialBalance","initalBuyType","setInitalBuyType","initalBuyAmount","setInitalBuyAmount","buyStrategyValue","setBuyStrategyValue","buyStrategyType","setBuyStrategyType","sellStrategyValue","setSellStrategyValue","deleteBacktest","current_symbol","cache_TSDA","cache_TSDA_function","dropdownItems","items","map","item","value","name","calcInitalBuy","buyType","buyAmount","currentBalance","curStockPrice","isBuyConditionMet","curIndicatorValue","console","log","getIndicatorJSON","finalizeTrade","myBag","buyDate","sellDate","candleCountSell","sellPrice","numShares","percentChange","profitUSD","candleLength","buyPrice","profitPercent","indicatorAtSell","indicatorAtBuy","numTrades","netBars","netSellVolume","runBacktests","paperAPICall","pairSettings","alert","fetch","response","json","stockPriceData","Note","optionalParameters","stockIndicatorData","didRun","candleCount","bagList","length","startDateReached","lowestSellPrice","Object","entries","reverse","key","startPrice","endPrice","newBagVolume","Math","min","newBagListKeys","holdReturn","toFixed","profitPercentOnBalance","profitPercentOnTrades","avgBars","onFocus","e","currentTarget","type","onSubmit","indicatorSettingDOM","target","buyStrategyDOM","immediatelyCalculate","id","tradeData"],"sources":["/Users/JohnD/Documents/tradingview/src/components/Backtest.js"],"sourcesContent":["import React, {useState, useContext} from 'react';\nimport styled from \"styled-components\";\nimport TradeList from './TradeList';\n\nimport { GlobalContext } from '../context/GlobalState';\n//import { pairs } from 'd3';\n\nconst CSS = styled.div`\n  background: #3d3d4a;\n  color: #898996;\n  display:flex;\n\n  padding: 1%;\n  margin: 0% 0% 1% 0%;\n\n  .settings{\n    font-size: 16px;\n    padding: 1%;\n    width: 25%;\n    box-shadow: rgba(0, 0, 0, 0.25) 0px 0.0625em 0.0625em, rgba(0, 0, 0, 0.25) 0px 0.125em 0.5em, rgba(255, 255, 255, 0.1) 0px 0px 0px 1px inset;\n  }\n  .results-overview{\n    padding: 1%;\n    width: 24%;\n    font-size: 16px;\n    box-shadow: rgba(0, 0, 0, 0.25) 0px 0.0625em 0.0625em, rgba(0, 0, 0, 0.25) 0px 0.125em 0.5em, rgba(255, 255, 255, 0.1) 0px 0px 0px 1px inset;\n    margin: 0% 1%;\n  }\n  .list-of-trades{\n    padding:1%;\n    width: 50%;\n    font-size: 16px;\n    box-shadow: rgba(0, 0, 0, 0.25) 0px 0.0625em 0.0625em, rgba(0, 0, 0, 0.25) 0px 0.125em 0.5em, rgba(255, 255, 255, 0.1) 0px 0px 0px 1px inset;\n\n  }\n\n\n  h4{\n    font-size: 180%;\n    border-bottom: 4px solid #898996;\n  }\n\n\n\n  /* left card CSS begin */\n  .input-flex{\n    display:flex;\n    border: none;\n    border-bottom: 2px solid #6464a3;\n    background: transparent;//#eff1f2;\n    color: #dedfe4;\n    width: 75%;\n    height: 2rem;\n    font-size: 16px;\n    padding-left: 0.5rem;\n    padding-top: 0.325rem;\n    padding-bottom: 0.325rem;\n    margin-bottom: 0.425rem;\n    \n    &:focus, &:hover{\n      outline: none;\n      color: #373641;\n      ::placeholder{\n        color: #a5a5b0;\n      }\n      background: #dedfe4;\n    }\n    ::placeholder{\n      color: #dedfe4;\n    }\n  }\n\n  .input-inline{\n    display:inline;\n    border: none;\n    border-bottom: 2px solid #6464a3;\n    background: transparent;//#eff1f2;\n    color: #dedfe4;\n    width:10%;\n    height: 2rem;\n    font-size: 16px;\n    padding-left: 0.5rem;\n    padding-top: 0.325rem;\n    padding-bottom: 0.325rem;\n    margin-bottom: 0.425rem;\n    \n    &:focus, &:hover{\n      outline: none;\n      color: #373641;\n      ::placeholder{\n        color: #a5a5b0;\n      }\n      background: #dedfe4;\n    }\n    ::placeholder{\n      color: #dedfe4;\n    }\n  }\n\n  .input-label{\n    color: #898996;\n    font-size: 14px;\n  }\n\n  .input-label-sub{\n    color: #898996;\n    font-style: italic;\n    font-size: 80%;\n    padding-left: 5%;\n    margin-bottom: 2%;\n  }\n\n  .input-select {\n    display:flex;\n    width: 75%;\n    color: #dedfe4;\n    border: none;\n    border-bottom: 2px solid #6464a3;\n    background: transparent;\n    height: 2rem;\n    font-size: 16px;\n    padding-left: 0.5rem;\n    margin-bottom: 0.425rem;\n\n    &:focus, &:hover{\n      outline: none;\n      color: #373641;\n      background: #dedfe4;\n    }\n  }\n\n\n  .calc-button {\n    display: block;\n    cursor: pointer;\n    outline: none;\n    border: none;\n    background-color: #dedfe4;\n    width: 200px;\n    height: 35px;\n    border-radius: 30px;\n    font-size: 18px;\n    font-weight: 600;\n    color: #373641;\n    background-size: 100% 100%;\n    box-shadow: 0 0 0 1px black inset;\n    margin: 1%;\n    margin-top: 3%;\n\n    @media only screen and (max-width: 968px) {\n      width: auto;\n    }\n  }\n  \n  .calc-button:hover {\n    background-image: linear-gradient(\n      145deg,\n      transparent 10%,\n      #89d47f 10% 20%,\n      transparent 20% 30%,\n      #89d47f 30% 40%,\n      transparent 40% 50%,\n      #89d47f 50% 60%,\n      transparent 60% 70%,\n      #89d47f 70% 80%,\n      transparent 80% 90%,\n      #89d47f 90% 100%\n    );\n    animation: background 6s linear infinite;\n\n\n    @media only screen and (max-width: 968px) {\n      width: auto;\n      color: #52515c;\n      background-color: #ebebeb;\n      background-image: none;\n    }\n  }\n\n  .del-button {\n    display: block;\n    cursor: pointer;\n    outline: none;\n    border: none;\n    background-color: #dedfe4;\n    width: 200px;\n    height: 35px;\n    border-radius: 30px;\n    font-size: 18px;\n    font-weight: 600;\n    color: #373641;\n    background-size: 100% 100%;\n    box-shadow: 0 0 0 1px black inset;\n    margin: 1%;\n    \n    margin-top: 3%;@media only screen and (max-width: 968px) {\n      width: auto;\n    }\n  }\n  \n  .del-button:hover {\n    background-image: linear-gradient(\n      145deg,\n      transparent 10%,\n      #d4847f 10% 20%,\n      transparent 20% 30%,\n      #d4847f 30% 40%,\n      transparent 40% 50%,\n      #d4847f 50% 60%,\n      transparent 60% 70%,\n      #d4847f 70% 80%,\n      transparent 80% 90%,\n      #d4847f 90% 100%\n    );\n    animation: background 6s linear infinite;\n    @media only screen and (max-width: 968px) {\n      width: auto;\n      color: #52515c;\n      background-color: #ebebeb;\n      background-image: none;\n    }\n  }\n  \n  @keyframes background {\n    0% {\n      background-position: 0 0;\n    }\n    100% {\n      background-position: 400px 0;\n    }\n  }\n  /* left card CSS end */\n  /* middle card CSS begin */\n  .result-item{\n    border-bottom: 2px solid #6464a3;\n    height: auto;\n    margin-bottom: 4%;\n    padding-bottom: 1%;\n  }\n  .result-title{\n    text-align: left;\n    color: #898996;\n    font-size: 14px;\n    width: 50%;\n  }\n  .result-output{\n    text-align: right;\n    color: #dedfe4;\n    font-size: 16px;\n    width: 50%;\n  }\n\n  .conclusion-title{\n    text-align: left;\n    color: #898996;\n    font-size: 14px;\n    width: 35%;\n  }\n  .backtest-won{\n    text-align: right;\n    font-size: 16px;\n    width: 65%;\n\n    color: #81dfc4;\n  }\n\n  .backtest-lost{\n    text-align: right;\n    font-size: 16px;\n    width: 65%;\n\n    color: #d75b6d;\n  }\n\n  .backtest-null{\n    text-align: right;\n    font-size: 16px;\n    width: 65%;\n\n    color: #dedfe4;\n  }\n  /* middle card CSS end */\n  /* right card CSS begin */\n  .trades-scroll{\n    font-size: 12px;\n    background-color: #373641;\n    padding: 1% 3%;\n    width:auto;\n    overflow-y:auto;\n    overflow-x:clip;\n    height: 750px;\n  }\n\n  /* right card CSS end */\n\n  /* Tooltip begin */\n  [data-tooltip] {\n    position: relative;\n    z-index: 10;\n  }\n\n  /* Positioning and visibility settings of the tooltip */\n  [data-tooltip]:before,\n  [data-tooltip]:after {\n    position: absolute;\n    visibility: hidden;\n    opacity: 0;\n    left: 50%;\n    bottom: calc(100% + 5px); /* 5px is the size of the arrow */\n    pointer-events: none;\n    transition: 0.2s;\n    will-change: transform;\n  }\n\n  /* The actual tooltip with a dynamic width */\n  [data-tooltip]:before {\n    content: attr(data-tooltip);\n    padding: 10px 18px;\n    min-width: 50px;\n    max-width: 300px;\n    width: max-content;\n    width: -moz-max-content;\n    border-radius: 6px;\n    font-size: 14px;\n    background-color: rgba(59, 72, 80, 0.9);\n    background-image: linear-gradient(30deg,\n      rgba(59, 72, 80, 0.44),\n      rgba(59, 68, 75, 0.44),\n      rgba(60, 82, 88, 0.44));\n    box-shadow: 0px 0px 24px rgba(0, 0, 0, 0.2);\n    color: #fff;\n    text-align: center;\n    white-space: pre-wrap;\n    transform: translate(-50%, -5px) scale(0.5);\n  }\n\n  /* Tooltip arrow */\n  [data-tooltip]:after {\n    content: '';\n    border-style: solid;\n    border-width: 5px 5px 0px 5px; /* CSS triangle */\n    border-color: rgba(55, 64, 70, 0.9) transparent transparent transparent;\n    transition-duration: 0s; /* If the mouse leaves the element, \n                                the transition effects for the \n                                tooltip arrow are \"turned off\" */\n    transform-origin: top;   /* Orientation setting for the\n                                slide-down effect */\n    transform: translateX(-50%) scaleY(0);\n  }\n\n  /* Tooltip becomes visible at hover */\n  [data-tooltip]:hover:before,\n  [data-tooltip]:hover:after {\n    visibility: visible;\n    opacity: 1;\n  }\n  /* Scales from 0.5 to 1 -> grow effect */\n  [data-tooltip]:hover:before {\n    transition-delay: 0.3s;\n    transform: translate(-50%, -5px) scale(1);\n  }\n  /* \n    Arrow slide down effect only on mouseenter (NOT on mouseleave)\n  */\n  [data-tooltip]:hover:after {\n    transition-delay: 0.5s; /* Starting after the grow effect */\n    transition-duration: 0.2s;\n    transform: translateX(-50%) scaleY(1);\n  }\n\n  /* LEFT */\n  /* Tooltip + arrow */\n  [data-tooltip-location=\"left\"]:before,\n  [data-tooltip-location=\"left\"]:after {\n    left: auto;\n    right: calc(100% + 5px);\n    bottom: 50%;\n  }\n\n  /* Tooltip */\n  [data-tooltip-location=\"left\"]:before {\n    transform: translate(-5px, 50%) scale(0.5);\n  }\n  [data-tooltip-location=\"left\"]:hover:before {\n    transform: translate(-5px, 50%) scale(1);\n  }\n\n  /* Arrow */\n  [data-tooltip-location=\"left\"]:after {\n    border-width: 5px 0px 5px 5px;\n    border-color: transparent transparent transparent rgba(55, 64, 70, 0.9);\n    transform-origin: left;\n    transform: translateY(50%) scaleX(0);\n  }\n  [data-tooltip-location=\"left\"]:hover:after {\n    transform: translateY(50%) scaleX(1);\n  }\n\n\n\n  /* RIGHT */\n  [data-tooltip-location=\"right\"]:before,\n  [data-tooltip-location=\"right\"]:after {\n    left: calc(100% + 5px);\n    bottom: 50%;\n  }\n\n  [data-tooltip-location=\"right\"]:before {\n    transform: translate(5px, 50%) scale(0.5);\n  }\n  [data-tooltip-location=\"right\"]:hover:before {\n    transform: translate(5px, 50%) scale(1);\n  }\n\n  [data-tooltip-location=\"right\"]:after {\n    border-width: 5px 5px 5px 0px;\n    border-color: transparent rgba(55, 64, 70, 0.9) transparent transparent;\n    transform-origin: right;\n    transform: translateY(50%) scaleX(0);\n  }\n  [data-tooltip-location=\"right\"]:hover:after {\n    transform: translateY(50%) scaleX(1);\n  }\n\n\n\n  /* BOTTOM */\n  [data-tooltip-location=\"bottom\"]:before,\n  [data-tooltip-location=\"bottom\"]:after {\n    top: calc(100% + 5px);\n    bottom: auto;\n  }\n\n  [data-tooltip-location=\"bottom\"]:before {\n    transform: translate(-50%, 5px) scale(0.5);\n  }\n  [data-tooltip-location=\"bottom\"]:hover:before {\n    transform: translate(-50%, 5px) scale(1);\n  }\n\n  [data-tooltip-location=\"bottom\"]:after {\n    border-width: 0px 5px 5px 5px;\n    border-color: transparent transparent rgba(55, 64, 70, 0.9) transparent;\n    transform-origin: bottom;\n  }\n\n  /* End of tooltips */\n\n`;\n\nexport const Backtest = ({ backtest }) => {\n\n  const defaultTimePeriod = () => {\n    switch(backtest.indicator){\n      case 'RSI': return 14;\n      case 'EMA': return 9;\n      case 'SMA': return 9;\n      case 'BB': return 20;\n      default: return 24;\n    }\n  }\n  const defaultBuyStrat = () => {\n    switch(backtest.indicator){\n      case 'RSI': return 30;\n      case 'EMA': return -3;\n      case 'SMA': return -3;\n      case 'BB': return -3;\n      default: return -3;\n    }\n  }\n\n  // Returns today date in YYYY-MM-DD formate\n  const getTodayDate = () => {\n    return new Date().toISOString().slice(0, 10);\n  }\n\n  // Returns 100 years ago today date in YYYY-MM-DD formate\n  const getOldDate = () => {\n    let myDate = new Date(new Date().setFullYear(new Date().getFullYear() - 100));\n    return myDate.toISOString().slice(0, 10);\n  }\n  \n  // Converts YYYY-MM-DD to DD/MM/YYYY\n  const formatDate = uglyDate => {\n    var array = (uglyDate || '').toString().split(/-/g);\n    array.push(array.shift());\n    return array.join('/') || null;\n  }\n\n  const [tradeListData, setTradeListData] = useState([]);\n\n  const [seriesType, setSeriesType] = useState('1. open');\n  const [timePeriod, setTimePeriod] = useState(defaultTimePeriod());\n  const [stdDeviation, setStdDeviation] = useState(2);\n  const [startDate, setStartDate] = useState(getOldDate());\n  const [endDate, setEndDate] = useState(getTodayDate());\n\n  const [maxBags, setMaxBags] = useState(15);\n  const [initalBalance, setInitialBalance] = useState(3000);\n  const [initalBuyType, setInitalBuyType] = useState('usd');\n  const [initalBuyAmount, setInitalBuyAmount] = useState(100);\n  const [buyStrategyValue, setBuyStrategyValue] = useState(defaultBuyStrat());\n  const [buyStrategyType, setBuyStrategyType] = useState('Real Middle Band'); // Used for Bollinger upper/middle/lower\n  const [sellStrategyValue, setSellStrategyValue] = useState(1);\n\n  const { deleteBacktest, current_symbol, cache_TSDA, cache_TSDA_function } = useContext(GlobalContext);\n\n  // Used for JSX dropdown items\n  const dropdownItems = (items) => {\n    return items.map(item => <option value={item.value} key={item.name}>{item.name}</option>);\n  }\n\n  // Calculates USD value for creating a bag\n  function calcInitalBuy(buyType, buyAmount, currentBalance, curStockPrice) {\n    switch(buyType){\n      case \"numStocks\":\n        return curStockPrice*buyAmount;\n      case \"percent\":\n        return currentBalance * (buyAmount/100.00);\n      default:\n        // case \"usd\":\n        return buyAmount;\n\n    }\n  }\n\n  // Function to return true/false for buy condition, given price and indicator values\n  function isBuyConditionMet(buyStrategyValue, curStockPrice, curIndicatorValue) {\n    switch(backtest.indicator){\n      case \"RSI\":\n        return curIndicatorValue < buyStrategyValue;\n      default:\n        // case EMA, SMA, BB (all cases where indicator is a price of stock)\n        console.log(`price is ${curStockPrice}, indicator is ${curIndicatorValue}, buy Price`, (curIndicatorValue * ((100.0 + buyStrategyValue)/100.0)), curStockPrice <= (curIndicatorValue * ((100.0 + buyStrategyValue)/100.0)));\n\n        return curStockPrice <= (curIndicatorValue * ((100.0 + buyStrategyValue)/100.0));\n    }\n  }\n\n  // Returns JSON name of element for indicator item\n  function getIndicatorJSON() {\n    switch(backtest.indicator){\n      case \"BBANDS\":\n        return buyStrategyType;\n      default:\n        return backtest.indicator;\n\n    }\n  }\n\n  // Finalizes trade, storing buy/sell data into backtest.tradeListData\n  function finalizeTrade(myBag, buyDate, sellDate, candleCountSell, sellPrice, curIndicatorValue, numShares) {\n    const percentChange = (sellPrice/myBag[\"buy-price\"]);\n    const profitUSD = +(percentChange-1)*myBag[\"volume-USD\"];\n    const candleLength = +candleCountSell-myBag[\"candle-count-buy\"];\n    \n    // Push on individual trade data\n    (backtest.tradeListData).push({\n      buyDate,\n      sellDate,\n      buyPrice: myBag[\"buy-price\"],\n      sellPrice,\n      numShares,\n      profitPercent: +percentChange-1,\n      profitUSD,\n      candleLength,\n      indicatorAtSell: curIndicatorValue,\n      indicatorAtBuy: myBag[\"indicator-at-buy\"]\n    });\n\n    // Update results Overview data\n    backtest.numTrades++;\n    backtest.profitUSD += profitUSD;\n    backtest.netBars += candleLength;\n    backtest.netSellVolume += sellPrice * numShares;\n\n    //console.log(\"finalizeTrade called, % change:\", percentChange, buyDate, sellDate);\n  }\n\n  // Runs user specified backtest algorithms and prepares outputs/trades to display\n  async function runBacktests(paperAPICall, pairSettings) {\n    let stockPriceData;\n    let stockIndicatorData;\n    let response;\n\n    // Ensure user has selected a stock\n    if(!current_symbol){\n      alert(\"Please select a stock to test your strategy on.\");\n      return;\n    }\n    \n    // Ensure API json for cache_TSDA exists\n    if(!cache_TSDA['Meta Data']){\n      response = await fetch(`https://www.alphavantage.co/query?function=TIME_SERIES_DAILY_ADJUSTED&symbol=${current_symbol}&outputsize=full&apikey=CQ5JZQYM4DG0OODA`);\n      stockPriceData = await response.json();\n      cache_TSDA_function(stockPriceData);\n\n      // Stop if MAX API\n      if(stockPriceData.Note) return;\n    }else{\n      stockPriceData = cache_TSDA;\n    }\n\n    // Make API call for stockIndicatorData\n    let optionalParameters;\n    switch(backtest.indicator){\n      case 'BBANDS':\n        optionalParameters = `&nbdevup=${pairSettings.stdDeviation}&nbdevdn=${pairSettings.stdDeviation}`;\n        break;\n      default:\n        optionalParameters = '';\n    }\n    response = await fetch(`https://www.alphavantage.co/query?function=${backtest.indicator}&symbol=${current_symbol}&interval=daily&time_period=${paperAPICall.timePeriod}&series_type=${paperAPICall.seriesType}${optionalParameters}&apikey=CQ5JZQYM4DG0OODA`);\n    stockIndicatorData = await response.json();\n    backtest.didRun = true;\n\n    // Catches MAX API\n    if(stockIndicatorData.Note){\n      alert(\"MAX API CALLS. Please wait a minute for more. Thank you for visitng my project! However, it was built using Alpha Vantage's standard API where the call frequency is 5 calls per minute and 500 calls per day.\");\n      backtest.didRun = false;\n      return;\n    }\n\n    // Initalize bags/candle-count/currentBalance\n    let candleCount = 0;\n    let bagList = {};\n    bagList.length = 0;\n    let currentBalance = pairSettings.initalBalance;\n    let startDateReached = false;\n    // Initalize single integer to know lowest price I consider selling at(updated when new bags are added)\n    let lowestSellPrice = 0;\n    // Main loop that runs the paper trading bot algo, maintains bags/buys/sells/etc throughout 5 years (1265 trading days)\n    // Note: in the following for loop: key == date\n    for(let [key] of Object.entries(stockIndicatorData[`Technical Analysis: ${backtest.indicator}`]).reverse()){\n      // Enables iterator code to run once start date reached/passed\n      if(key>=startDate){\n        startDateReached = true;\n      }\n      // Skips iterator because start date not reached\n      if(startDateReached === false){\n        continue;\n      }else if(key===endDate){\n        // End date reached... so stop iterating.\n        break;\n      }\n      // Count Candles interated over\n      candleCount++;\n      \n      // Skip days where no price exists\n      if(!stockPriceData[\"Time Series (Daily)\"][`${key}`]) continue;\n      // Essential values for iterating stock data\n      let curIndicatorValue = +stockIndicatorData[`Technical Analysis: ${backtest.indicator}`][`${key}`][`${getIndicatorJSON()}`];\n      let curStockPrice = +stockPriceData[\"Time Series (Daily)\"][`${key}`][`${paperAPICall.seriesType}`];\n\n      // First price of start date\n      if(!backtest.startPrice){\n        backtest.startPrice = curStockPrice;\n      }\n      // Maintain oldest price\n      backtest.endPrice = curStockPrice;    \n\n      // Prospective USD to create a new bag\n      const newBagVolume = calcInitalBuy(pairSettings.initalBuyType, pairSettings.initalBuyAmount, currentBalance, curStockPrice);\n\n      // If Buy condition: Bags open, balance sufficient, price meets indicator limit\n      if(bagList.length<pairSettings.maxBags && newBagVolume <= currentBalance && isBuyConditionMet(pairSettings.buyStrategyValue, curStockPrice, curIndicatorValue)){\n        // Create and add bag to bagList, increment bagList.length. Automatically added by creating key.\n        bagList.length++;\n        console.log(\"bag added\", bagList);\n        bagList[`${key}`] = {\n          \"sell-price-limit\": +(1+(pairSettings.sellStrategyValue/100)) * curStockPrice,\n          \"buy-price\": +curStockPrice,\n          \"candle-count-buy\": +candleCount,\n          \"volume-USD\": +newBagVolume,\n          \"num-shares\": +newBagVolume/curStockPrice,\n          \"indicator-at-buy\": curIndicatorValue\n        }\n\n        // Update currentBalance\n        currentBalance -= bagList[`${key}`][\"volume-USD\"];\n\n        // Update lowestSellPrice, min of current lowest, or new buy price is lower. Initialize if only 1 bag.\n        if(bagList.length===1){\n          lowestSellPrice = +bagList[`${key}`][\"sell-price-limit\"];\n        }else{\n          lowestSellPrice = Math.min(lowestSellPrice, bagList[`${key}`][\"sell-price-limit\"]);\n        }\n      // Else If Sell Condition\n      }else if(curStockPrice>= lowestSellPrice && bagList.length>0){\n        // Store key of buy date(below loop has new key in smaller scope)\n        let sellDate = key;\n        for(let [key] of Object.entries(bagList)){ \n          if(curStockPrice >= bagList[`${key}`][\"sell-price-limit\"]){\n            // Finalize Trade function records trade data into backtest to display in JSX below\n            finalizeTrade(bagList[`${key}`], key, sellDate, candleCount, curStockPrice, curIndicatorValue, bagList[`${key}`][\"num-shares\"], bagList[`${key}`][\"indicator-at-buy\"]);\n            delete bagList[`${key}`];\n            bagList.length--;\n          }\n        }\n\n        // If bags exist, update to new lowest price\n        const newBagListKeys = Object.entries(bagList);\n        if(newBagListKeys[0][1]>0){\n          lowestSellPrice = bagList[newBagListKeys[1][0]][\"sell-price-limit\"];\n          for(let [key] of newBagListKeys){ \n            lowestSellPrice = Math.min(lowestSellPrice, +bagList[`${key}`][\"sell-price-limit\"]);\n          }\n        }\n      }\n      // End of Buy/Sell conditions\n    }\n    \n    //console.log(\"iterating done\", backtest, startDate, endDate, backtest.holdReturn);\n    // Iterating complete, finalize some data on compelted backtest algorithm\n    backtest.holdReturn = (((backtest.endPrice / backtest.startPrice)-1) * 100).toFixed(2);\n    //console.log(\"set holdret\", backtest.holdReturn, \"end/start\", backtest.endPrice, backtest.startPrice);\n    delete backtest.startPrice;\n    backtest.profitPercentOnBalance = backtest.profitUSD / pairSettings.initalBalance;\n    backtest.profitPercentOnTrades = backtest.profitUSD / (backtest.netSellVolume - backtest.profitUSD);\n    backtest.avgBars = backtest.netBars / backtest.numTrades;\n    \n    // Update results display and sends tradeListData to TradeList.js in JSX below\n    setTradeListData(backtest.tradeListData);\n  }\n\n  // Turns JSX input type to date\n  const onFocus = e =>{\n    e.currentTarget.type = \"date\";\n  }\n\n  const onSubmit = () => {\n    backtest.current_symbol = current_symbol;\n\n    const paperAPICall = { \n      // Relavent variables that are global: current_symbol, interval(daily), backtest.indicator(ex, RSI)\n      seriesType: seriesType,\n      timePeriod: +timePeriod,\n      stdDeviation: +stdDeviation\n    };\n\n    // Trivial value, set to 2\n    if(paperAPICall.timePeriod===1){\n      paperAPICall.timePeriod = 2;\n    }\n\n    const pairSettings = {\n      maxBags: +maxBags,\n      initalBalance: +initalBalance,\n      initalBuyType: initalBuyType,\n      initalBuyAmount: +initalBuyAmount,\n      buyStrategyValue: +buyStrategyValue,\n      buyStrategyType, // used for Bollinger upper/middle/lower\n      sellStrategyValue: +sellStrategyValue\n    }\n\n    // Ensure no trivial strategies are submitted\n    if(pairSettings.maxBags<1 || pairSettings.initalBalance<1 || pairSettings.initalBuyAmount<1 || pairSettings.sellStrategyValue<0 || paperAPICall.timePeriod<1){\n      // Bags, balance, timeperiod, buy amount, sell gain% must be positive\n      alert(\"Please enter valid inputs. Use positive integers for the following: Max bags, Sell percentage, Time period, Buy amount, Inital Balance.\");\n    }else if(pairSettings.initalBuyType==='percent' && (pairSettings.initalBuyAmount<1 || pairSettings.initalBuyAmount>100)){\n      // if(buy type is percent) buy amount must be (0-100]\n      alert(\"Buy amount percentage must be 1-100%\");\n    }else if (pairSettings.initalBuyAmount>pairSettings.initalBalance){\n      // inital buy must be < inital balance\n      alert(\"Inital buys must be less than or equal to inital balance.\");\n    }else if(backtest.indicator==='RSI' && (pairSettings.buyStrategyValue<1 || pairSettings.buyStrategyValue>99)){\n      // Ensure no trivial strategy specific settings are submitted <connect to previous if chain thing>\n      alert(\"RSI values must be between 1-99\");\n    }else if(backtest.indicator==='BBANDS' && paperAPICall.stdDeviation<0.5){\n      // Ensure no trivial BB std deviation\n      alert(\"Standard Deviation must be greater than or equal to 0.5.\");\n    }else{\n      // Calculation inputs valid\n      //console.log(pairSettings);\n\n      // Initialize Trade List Data(for final results)\n      backtest.tradeListData = [];\n      backtest.profitUSD = 0;\n      backtest.numTrades = 0;\n      backtest.netBars = 0;\n      backtest.netSellVolume = 0; // Net volume USD sold\n\n      // Run backtest algorithm\n      runBacktests(paperAPICall, pairSettings);\n    }\n\n  }\n\n  let indicatorSettingDOM = null;\n  switch(backtest.indicator){\n    case 'RSI':\n      indicatorSettingDOM = (<> \n        {/* Time Period(# candles in calc) */}\n          <label className=\"input-label\" data-tooltip=\"Number of prior days technical indicator is calculated from.\">Time Period (days):</label>\n          <input className=\"input-flex\" placeholder='14' onChange={(e) => setTimePeriod(e.target.value)} />\n      </>);\n      break;\n    case 'EMA':\n      indicatorSettingDOM = (<> \n        {/* Time Period(# candles in calc) */}\n        <label className=\"input-label\" data-tooltip=\"Number of prior days technical indicator is calculated from.\">Time Period (days): </label>\n        <input className=\"input-flex\" placeholder=\"9\" onChange={(e) => setTimePeriod(e.target.value)} />\n      </>);\n      break;\n    case 'SMA':\n      indicatorSettingDOM = (<> \n        {/* Time Period(# candles in calc) */}\n        <label className=\"input-label\" data-tooltip=\"Number of prior days technical indicator is calculated from.\">Time Period (days):</label>\n        <input className=\"input-flex\" placeholder=\"9\" onChange={(e) => setTimePeriod(e.target.value)} />\n      </>);\n      break;\n    case 'BBANDS':\n      indicatorSettingDOM = (<> \n        {/* Time Period(# candles in calc) */}\n        <label className=\"input-label\" data-tooltip=\"Number of prior days technical indicator is calculated from.\">Time Period (days): </label>\n        <input className=\"input-flex\" placeholder=\"20\" onChange={(e) => setTimePeriod(e.target.value)} />\n\n        {/* Standard deviation for both top/bot lines */}\n        <label className=\"input-label\" data-tooltip=\"Standard devation for calculating upper and lower bollinger bands.\">Standard Deviation for upper/lower lines:</label>\n        <input className=\"input-flex\" placeholder=\"2\" onChange={(e) => setStdDeviation(e.target.value)} />\n      </>);\n      break;\n    default:\n      indicatorSettingDOM = (<div>Default backtest indicator DOM</div>);\n    \n  }\n\n  let buyStrategyDOM = null;\n  switch(backtest.indicator){\n    case 'RSI':\n      buyStrategyDOM = (<> \n        {/* Buy Strategy RSI */}\n        <label className=\"input-label\" data-tooltip=\"Open a position on stock for this condition.\">Buy when RSI less than</label>\n        <input className=\"input-inline\" placeholder='30' onChange={(e) => setBuyStrategyValue(e.target.value)} />\n        <br/>\n      </>);\n      break;\n    case 'EMA':\n      buyStrategyDOM = (<> \n        {/* Buy strategy % away */}\n        <label className=\"input-label\" data-tooltip=\"Open a position on stock for this condition.\">Buy at price</label>\n        <input className=\"input-inline\" placeholder=\"-3\" onChange={(e) => setBuyStrategyValue(e.target.value)}/>\n        <label className=\"input-label\" data-tooltip=\"Open a position on stock for this condition.\">% away from the EMA line. </label>\n        <label className=\"input-label-sub\" data-tooltip=\"Positive values will open a position when the stock price is X% above the indicator value. Negative values will open a position when the stock price is X% below the indicator value.\">(3 = 3% above, -3 = 3% below)</label>\n        <br/>\n      </>);\n      break;\n    case 'SMA':\n      buyStrategyDOM = (<> \n        {/* Buy strategy % away */}\n        <label className=\"input-label\" data-tooltip=\"Open a position on stock for this condition.\">Buy at price</label>\n        <input className=\"input-inline\" placeholder=\"-3\" onChange={(e) => setBuyStrategyValue(e.target.value)}/>\n        <label className=\"input-label\" data-tooltip=\"Open a position on stock for this condition.\">% away from the SMA line. </label>\n        <label className=\"input-label-sub\" data-tooltip=\"Positive values will open a position when the stock price is X% above the indicator value. Negative values will open a position when the stock price is X% below the indicator value.\">(3 = 3% above, -3 = 3% below)</label>\n        <br/>\n      </>);\n      break;\n    case 'BBANDS':\n      buyStrategyDOM = (<> \n        {/* Buy strategy % away (BB) */}\n        <label className=\"input-label\" data-tooltip=\"Select bollinger band the backtest will track to open and close positions.\">Band to follow:</label>\n        <select className=\"input-select\" onChange={(e) => setBuyStrategyType(e.target.value)}>\n          {dropdownItems([\n            {name:'Middle', value:'Real Middle Band'},\n            {name:'Upper', value:'Real Upper Band'},\n            {name:'Lower', value:'Real Lower Band'}\n          ])}\n        </select>\n        \n        <label className=\"input-label\" data-tooltip=\"Open a position on stock for this condition.\">Buy at price</label>\n        <input className=\"input-inline\" placeholder=\"-3\" onChange={(e) => setBuyStrategyValue(e.target.value)}/>\n        <label className=\"input-label\" data-tooltip=\"Open a position on stock for this condition.\">% away from the selected line. </label>\n        <label className=\"input-label-sub\" data-tooltip=\"Positive values will open a position when the stock price is X% above the indicator value. Negative values will open a position when the stock price is X% below the indicator value.\">(3 = 3% above, -3 = 3% below)</label>\n        <br/>\n      </>);\n      break;\n    default:\n      buyStrategyDOM = (<div>buy strat dom default</div>);\n    \n  }\n\n  // Immediately Calculates backtest results (for 'See Example' button on homepage)\n  if(backtest.immediatelyCalculate){\n    onSubmit();\n    backtest.immediatelyCalculate = false;\n  }\n\n  return (\n    <CSS>\n      <div className='settings'>\n        {/* Beginning of Settings */}\n        <h4 data-tooltip=\"Settings for calculating technical indicator.\">{backtest.indicator} Settings</h4>\n\n        {/* series type */}\n        <label className=\"input-label\" data-tooltip=\"Indicator calculated from open, high, low, or closing prices for each period.\">Select Series Type:</label>\n        <select className=\"input-select\" onChange={(e) => setSeriesType(e.target.value)}>\n          {dropdownItems([\n            {name:'open', value:'1. open'},\n            {name:'close', value:'4. close'},\n            {name:'high', value:'2. high'},\n            {name:'low', value:'3. low'}])}\n        </select>\n        \n        {indicatorSettingDOM}\n\n        <br/>\n\n        <h4 data-tooltip=\"Settings for calculating buy/sell conditions.\">Trading Strategy Settings</h4>\n\n        {/* Begin date for backtest */}\n        <label className=\"input-label\" data-tooltip=\"Date for the backtest to begin. Leave blank for earliest date.\">Start Date:</label>\n        <input className=\"input-flex\" type=\"text\" placeholder=\"IPO date (earliest)\" onFocus={(e) => onFocus(e)} onChange={(e) => setStartDate(e.target.value)}/>\n              \n\n        {/* End date for backtest */}\n        <label className=\"input-label\" data-tooltip=\"Date for the backtest to end. Leave blank for today's date.\">End Date:</label>\n        <input className=\"input-flex\" type=\"text\" placeholder={formatDate(getTodayDate())} onFocus={(e) => onFocus(e)} onChange={(e) => setEndDate(e.target.value)}/>\n              \n        {/* Max number bags */}\n        <label className=\"input-label\" data-tooltip=\"Max number of positions to have at a given time. Algorithm will not add new positions that would exceed this value.\">Max number of positions:</label>\n        <input className=\"input-flex\" placeholder=\"15\" onChange={(e) => setMaxBags(e.target.value)} />\n\n        {/* Inital balance */}\n        <label className=\"input-label\" data-tooltip=\"Inital balance for backtest algorithm to start trading with.\">Inital balance (USD):</label>\n        <input className=\"input-flex\" min=\"0\" placeholder=\"3000\" onChange={(e) => setInitialBalance(e.target.value)} />\n\n        {/* Inital buy (type/amount) */}\n        <label className=\"input-label\" data-tooltip=\"Volume of new positions will be opened in reference to this type of value.\">Inital buy type:</label>\n        <select className=\"input-select\" onChange={(e) => setInitalBuyType(e.target.value)}>\n          {dropdownItems([\n            {name:'($) USD', value:'usd'},\n            {name:'(%) Percent of Balance', value:'percent'},\n            {name:'(#) Number of Stocks', value:'numStocks'}\n          ])}\n        </select>\n\n        <label className=\"input-label\" data-tooltip=\"Value for new positions to begin with.\">Inital buy amount:</label>\n        <input className=\"input-flex\" min=\"0\" placeholder=\"100\" onChange={(e) => setInitalBuyAmount(e.target.value)} />\n\n        {buyStrategyDOM}\n\n        {/* Sell Strategy */}\n        <label className=\"input-label\" data-tooltip=\"Close positions when profit meets or exceeds this value.\">Sell position at</label>\n        <input className=\"input-inline\" placeholder=\"1\" onChange={(e) => setSellStrategyValue(e.target.value)} />\n        <label className=\"input-label\" data-tooltip=\"Close positions when profit meets or exceeds this value.\">% profit.</label>\n        <br/>\n\n        {/* submit button */}\n        <button className=\"calc-button\" onClick={() => onSubmit()}>Calculate</button>\n\n\n        {/* close button */}\n        <button className=\"del-button\" onClick={() => deleteBacktest(backtest.id)} >Delete</button>\n      </div>\n      {/* end of settings, beginning of results overview */}\n\n      <div className='results-overview'>\n        <h4 data-tooltip=\"Results of backtest.\">Performance Overview {backtest.current_symbol?\"(\"+backtest.current_symbol+\")\":\"\"}</h4>\n        <div className=\"result-item\">\n          <label className=\"result-title\" data-tooltip=\"Total profit of backtest in USD.\">Profit USD:</label>\n          <label className=\"result-output\">${(backtest.profitUSD?backtest.profitUSD:0).toFixed(2)}</label>\n        </div>\n        <div className=\"result-item\">\n          <label className=\"result-title\" data-tooltip=\"Total profit of backtest in percent.\">Profit Percent on Entire Balance: </label>\n          <label className=\"result-output\">{(backtest.profitPercentOnBalance ? 100*backtest.profitPercentOnBalance : 0).toFixed(2)}%</label>\n        </div>\n        <div className=\"result-item\">\n          <label className=\"result-title\" data-tooltip=\"Average profit of trades from running backtest.\">Average profit per trade: </label>\n          <label className=\"result-output\"> {(backtest.profitPercentOnTrades?100*backtest.profitPercentOnTrades:0).toFixed(2)}%</label>\n        </div>\n        <div className=\"result-item\">\n          <label className=\"result-title\" data-tooltip=\"Number of trades made by backtest.\">Number of trades: </label>\n          <label className=\"result-output\">{backtest.numTrades? backtest.numTrades:0}</label>\n        </div>\n        <div className=\"result-item\">\n          <label className=\"result-title\" data-tooltip=\"Average number of candles/days between opening and closing each position.\">Average bars per trade: </label>\n          <label className=\"result-output\">{(backtest.avgBars?backtest.avgBars:0).toFixed(2)}</label>\n        </div>\n        <div className=\"result-item\">\n          <label className=\"result-title\" data-tooltip=\"Return if inital balance had been fully invested at the start date and cashed out at the end date. (instead of running algorithm)\">Buy and hold return: </label>\n          <label className=\"result-output\">{backtest.holdReturn>0?\"+\":\"\"}{backtest.holdReturn?backtest.holdReturn:\"0\"}%</label>\n        </div>\n        <div className=\"result-item\">\n          <label className=\"conclusion-title\">Backtest Conclusion: </label>\n          {backtest.didRun?\n            backtest.profitPercentOnBalance>backtest.holdReturn?\n              <label className=\"backtest-won\"> This algorithm is more profitable than buy and holding {backtest.current_symbol}. </label>\n              :\n              <label className=\"backtest-lost\"> Buy and holding {backtest.current_symbol} is more profitable than this algorithm. </label>\n            :\n            <label className=\"backtest-null\">No trades made</label>\n          }\n        </div>\n          \n      </div>\n      \n      {/* End of results overview, begin list of trades */}\n\n      <div className='list-of-trades'>\n        <h4 data-tooltip=\"History of positions opened/closed by backtest.\">List Of Trades</h4>\n        <div className=\"trades-scroll\">\n          <TradeList tradeList={tradeListData.map(tradeData => tradeData)}/>\n        </div>\n      </div>\n      \n      {/* End list of trades */}\n    </CSS>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}